import{_ as t,r as l,o as i,c as r,a as s,b as e,d as a,e as o}from"./app.6ea3dcf3.js";const c={},p=o(`<h1 id="asdf" tabindex="-1"><a class="header-anchor" href="#asdf" aria-hidden="true">#</a> asdf</h1><p><code>asdf</code> core contribution guide.</p><h2 id="initial-setup" tabindex="-1"><a class="header-anchor" href="#initial-setup" aria-hidden="true">#</a> Initial Setup</h2><p>Fork <code>asdf</code> on GitHub and/or Git clone the default branch:</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;"># clone your fork</span></span>
<span class="line"><span style="color:#F8F8F2;">git clone https://github.com/</span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">GITHUB_USER</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;">/asdf.git</span></span>
<span class="line"><span style="color:#88846F;"># or clone asdf</span></span>
<span class="line"><span style="color:#F8F8F2;">git clone https://github.com/asdf-vm/asdf.git</span></span>
<span class="line"></span></code></pre></div><p>The tools for core development are in this repo&#39;s <code>.tool-versions</code>. If you wish to manage with <code>asdf</code> itself, add the plugins:</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">asdf plugin add bats https://github.com/timgluz/asdf-bats.git</span></span>
<span class="line"><span style="color:#F8F8F2;">asdf plugin add shellcheck https://github.com/luizm/asdf-shellcheck.git</span></span>
<span class="line"><span style="color:#F8F8F2;">asdf plugin add shfmt https://github.com/luizm/asdf-shfmt.git</span></span>
<span class="line"></span></code></pre></div><p>Install the versions to develop <code>asdf</code> with:</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">asdf install</span></span>
<span class="line"></span></code></pre></div><p>It <em>may</em> be useful to not use <code>asdf</code> to manage the tools during development on your local machine as you may need to break functionality which would then break your dev tooling. Here&#39;s the raw list of tools:</p>`,10),d={href:"https://github.com/bats-core/bats-core",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/koalaman/shellcheck",target:"_blank",rel:"noopener noreferrer"},u={href:"https://github.com/mvdan/sh",target:"_blank",rel:"noopener noreferrer"},m=o(`<h2 id="development" tabindex="-1"><a class="header-anchor" href="#development" aria-hidden="true">#</a> Development</h2><p>If you want to try out your changes without making change to your installed <code>asdf</code>, you can set the <code>$ASDF_DIR</code> variable to the path where you cloned the repository, and temporarily prepend the <code>bin</code> and <code>shims</code> directory of the directory to your path.</p><p>It is best to format, lint and test your code locally before you commit or push to the remote. Use the following scripts/commands:</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;"># Shellcheck</span></span>
<span class="line"><span style="color:#F8F8F2;">./scripts/shellcheck.bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># Format</span></span>
<span class="line"><span style="color:#F8F8F2;">./scripts/shfmt.bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># Test: all tests</span></span>
<span class="line"><span style="color:#F8F8F2;">bats test/</span></span>
<span class="line"><span style="color:#88846F;"># Test: for specific command</span></span>
<span class="line"><span style="color:#F8F8F2;">bats test/list_commands.bash</span></span>
<span class="line"></span></code></pre></div>`,4),g={class:"custom-container tip"},f=s("p",{class:"custom-container-title"},"TIP",-1),F=s("strong",null,"Add tests!",-1),b=s("strong",null,"required",-1),y={href:"https://bats-core.readthedocs.io/en/stable/index.html",target:"_blank",rel:"noopener noreferrer"},_=s("h3",{id:"gitignore",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#gitignore","aria-hidden":"true"},"#"),e(" Gitignore")],-1),v=s("code",null,".gitignore",-1),k=s("code",null,"asdf-vm/asdf",-1),w=s("code",null,".gitignore",-1),x={href:"http://stratus3d.com/blog/2018/06/03/stop-excluding-editor-temp-files-in-gitignore/",target:"_blank",rel:"noopener noreferrer"},q=o(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">/installs</span></span>
<span class="line"><span style="color:#F8F8F2;">/downloads</span></span>
<span class="line"><span style="color:#F8F8F2;">/plugins</span></span>
<span class="line"><span style="color:#F8F8F2;">/shims</span></span>
<span class="line"><span style="color:#F8F8F2;">repository</span></span>
<span class="line"><span style="color:#F8F8F2;">.vagrant</span></span>
<span class="line"><span style="color:#F8F8F2;">keyrings</span></span>
<span class="line"><span style="color:#F8F8F2;">/tmp</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="git-blame-ignore-revs" tabindex="-1"><a class="header-anchor" href="#git-blame-ignore-revs" aria-hidden="true">#</a> <code>.git-blame-ignore-revs</code></h3>`,2),T=s("code",null,"asdf",-1),C=s("code",null,".git-blame-ignore-revs",-1),I={href:"https://git-scm.com/docs/git-blame",target:"_blank",rel:"noopener noreferrer"},S=o(`<p>Use the file with <code>git blame</code> like so:</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">git blame --ignore-revs-file .git-blame-ignore-revs ./test/install_command.bats</span></span>
<span class="line"></span></code></pre></div><p>Optionally, configure to use the file on every invocation of <code>blame</code> without manually supplying it:</p><div class="language-bash" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">git config blame.ignoreRevsFile .git-blame-ignore-revs</span></span>
<span class="line"></span></code></pre></div>`,4),D={href:"https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens",target:"_blank",rel:"noopener noreferrer"},E=s("code",null,".vscode/settings.json",-1),B=o(`<div class="language-json" data-ext="json"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;">&quot;gitlens.advanced.blame.customArguments&quot;</span><span style="color:#F8F8F2;">: [</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#CFCFC2;">&quot;--ignore-revs-file&quot;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#CFCFC2;">&quot;.git-blame-ignore-revs&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  ]</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="bats-testing" tabindex="-1"><a class="header-anchor" href="#bats-testing" aria-hidden="true">#</a> Bats Testing</h2>`,2),P=s("strong",null,"strongly encouraged",-1),R={href:"https://bats-core.readthedocs.io/en/stable/index.html",target:"_blank",rel:"noopener noreferrer"},A=o(`<p>Bats debugging can be difficult at times. Using the TAP output with <code>-t</code> flag will enable you to print outputs with the special file descriptor <code>&gt;&amp;3</code> during test execution, simplifying debugging. As an example:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;"># test/some_tests.bats</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">printf</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;%s\\n&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;Will not be printed during bats test/some_tests.bats&quot;</span></span>
<span class="line"><span style="color:#66D9EF;">printf</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;%s\\n&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;Will be printed during bats -t test/some_tests.bats&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">&gt;&amp;3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),V={href:"https://bats-core.readthedocs.io/en/stable/writing-tests.html#printing-to-the-terminal",target:"_blank",rel:"noopener noreferrer"},G=s("h2",{id:"pull-requests-releases-conventional-commits",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#pull-requests-releases-conventional-commits","aria-hidden":"true"},"#"),e(" Pull Requests, Releases & Conventional Commits")],-1),j=s("code",null,"asdf",-1),N={href:"https://github.com/googleapis/release-please",target:"_blank",rel:"noopener noreferrer"},U={href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"},H={href:"https://github.com/asdf-vm/asdf/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"},z={href:"https://www.conventionalcommits.org/",target:"_blank",rel:"noopener noreferrer"},L={href:"https://github.com/amannn/action-semantic-pull-request",target:"_blank",rel:"noopener noreferrer"},O=s("code",null,"amannn/action-semantic-pull-request",-1),W=o(`<p>Conventional Commit follows this format:</p><div class="language-text" data-ext="text"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">&lt;type&gt;[optional scope][optional !]: &lt;description&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;!-- examples --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">fix: some fix</span></span>
<span class="line"><span style="color:#F8F8F2;">feat: a new feature</span></span>
<span class="line"><span style="color:#F8F8F2;">docs: some documentation update</span></span>
<span class="line"><span style="color:#F8F8F2;">docs(website): some change for the website</span></span>
<span class="line"><span style="color:#F8F8F2;">feat!: feature with breaking change</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre></div><p>The full list of <code>&lt;types&gt;</code> are: <code>feat</code>, <code>fix</code>, <code>docs</code>, <code>style</code>, <code>refactor</code>, <code>perf</code>, <code>test</code>, <code>build</code>, <code>ci</code>, <code>chore</code>, <code>revert</code>.</p><ul><li><code>!</code>: indicates a breaking change</li><li><code>fix</code>: will create a new SemVer <code>patch</code></li><li><code>feat</code>: will create a new SemVer <code>minor</code></li><li><code>&lt;type&gt;!</code>: will create a new SemVer <code>major</code></li></ul><p>The Pull Request Title must follow this format.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Use Conventional Commit message format for your Pull Request Title.</p></div><h2 id="docker-images" tabindex="-1"><a class="header-anchor" href="#docker-images" aria-hidden="true">#</a> Docker Images</h2>`,7),X={href:"https://github.com/vic/asdf-alpine",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://github.com/vic/asdf-ubuntu",target:"_blank",rel:"noopener noreferrer"};function $(J,K){const n=l("ExternalLinkIcon");return i(),r("div",null,[p,s("ul",null,[s("li",null,[s("a",d,[e("bats-core"),a(n)]),e(": Bash Automated Testing System, for unit testing Bash or POSIX compliant scripts.")]),s("li",null,[s("a",h,[e("shellcheck"),a(n)]),e(": Static analysis tool for shell scripts.")]),s("li",null,[s("a",u,[e("shfmt"),a(n)]),e(": A shell parser, formatter, and interpreter with bash support; includes shfmt")])]),m,s("div",g,[f,s("p",null,[F,e(" - Tests are "),b,e(" for new features and speed up review of bug fixes. Please cover new code paths before you create a Pull Request. See "),s("a",y,[e("bats-core documentation"),a(n)])])]),_,s("p",null,[e("The following is the "),v,e(" file in the "),k,e(" repository. We ignore project-specific files. Files specific to your OS, tools or workflows should be ignored in your global "),w,e(" configuration, "),s("a",x,[e("see here"),a(n)]),e(" for more details.")]),q,s("p",null,[T,e(" uses a "),C,e(" to reduce noise when running a blame. See the "),s("a",I,[e("git blame documentation"),a(n)]),e(" for more information.")]),S,s("p",null,[e("It is possible to configure IDEs to use this file. For example, when using VSCode (with "),s("a",D,[e("GitLens"),a(n)]),e("), write the following to "),E,e(":")]),B,s("p",null,[e("It is "),P,e(" to examine the existing test suite and the "),s("a",R,[e("bats-core documentation"),a(n)]),e(" before writing tests.")]),A,s("p",null,[e("This is further documented in bats-core "),s("a",V,[e("Printing to the Terminal"),a(n)]),e(".")]),G,s("p",null,[j,e(" is using an automated release tool called "),s("a",N,[e("Release Please"),a(n)]),e(" to automatically bump the "),s("a",U,[e("SemVer"),a(n)]),e(" version and generate the "),s("a",H,[e("Changelog"),a(n)]),e(". This information is determined by reading the commit history since the last release.")]),s("p",null,[s("a",z,[e("Conventional Commit messages"),a(n)]),e(" define the format of the Pull Request Title which becomes the commit message format on the default branch. This is enforced with GitHub Action "),s("a",L,[O,a(n)]),e(".")]),W,s("p",null,[e("The "),s("a",X,[e("asdf-alpine"),a(n)]),e(" and "),s("a",Y,[e("asdf-ubuntu"),a(n)]),e(" projects are an ongoing effort to provide Dockerized images of some asdf tools. You can use these docker images as base for your development servers, or for running your production apps.")])])}const Q=t(c,[["render",$],["__file","core.html.vue"]]);export{Q as default};
